@model Tuple<List<ProblemCategory>, int[], int[]>

@{
    ViewData["Title"] = "题目集";
}


<div class="">
    <div class="page-header-title">
        <h4 class="page-title">@ViewData["Title"] </h4>
    </div>
</div>





<!-- DataTables -->
<link href="~/assets/plugins/datatables/jquery.dataTables.min.css" rel="stylesheet" type="text/css" />
<link href="~/assets/plugins/datatables/buttons.bootstrap.min.css" rel="stylesheet" type="text/css" />
<link href="~/assets/plugins/datatables/fixedHeader.bootstrap.min.css" rel="stylesheet" type="text/css" />
<link href="~/assets/plugins/datatables/responsive.bootstrap.min.css" rel="stylesheet" type="text/css" />
<link href="~/assets/plugins/datatables/dataTables.bootstrap.min.css" rel="stylesheet" type="text/css" />
<link href="~/assets/plugins/datatables/scroller.bootstrap.min.css" rel="stylesheet" type="text/css" />



<div class="page-content-wrapper ">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="panel panel-default">
                    <div class="panel-body">

                        <div class="row">
                            <div class="col-md-12">

                                <div class="panel-body">
                                    <div class="row">
                                        <div class="col-md-12 col-sm-12 col-xs-12">
                                            <table id="datatable" class="table table-striped table-bordered">
                                                <thead>
                                                    <tr>
                                                        <td>题目ID</td>
                                                        <td>题目标题</td>
                                                        <td>提交次数</td>
                                                        <td>通过次数</td>
                                                    </tr>
                                                </thead>


                                                <tbody>
                                                    @foreach (var item in Model.Item1)
                                                    {
                                                        <tr>
                                                            <td>
                                                                @Html.DisplayFor(modelItem => item.ProblemId)
                                                            </td>
                                                            <td>
                                                                <a asp-controller="Problem" asp-action="Show" asp-route-id="@item.ProblemId" class="waves-effect">
                                                                    @item.Problem.Title
                                                                </a>
                                                            </td>
                                                            <td>@Model.Item2[@item.ProblemId]</td>
                                                            <td>@Model.Item3[@item.ProblemId]</td>
                                                        </tr>
                                                    }

                                                </tbody>
                                            </table>

                                        </div>
                                    </div>


                                </div> <!-- panel-body -->
                            </div>
                        </div> <!-- end row -->
                    </div> <!-- panel body -->
                </div> <!-- end panel -->

            </div> <!-- end col -->

        </div>
        <!-- end row -->


    </div><!-- container -->
</div> <!-- Page content Wrapper -->
<!-- Datatables-->
<script src="~/assets/plugins/datatables/jquery.dataTables.min.js"></script>
<script src="~/assets/plugins/datatables/dataTables.bootstrap.js"></script>
<script src="~/assets/plugins/datatables/dataTables.buttons.min.js"></script>
<script src="~/assets/plugins/datatables/buttons.bootstrap.min.js"></script>
<script src="~/assets/plugins/datatables/jszip.min.js"></script>
<script src="~/assets/plugins/datatables/pdfmake.min.js"></script>
<script src="~/assets/plugins/datatables/vfs_fonts.js"></script>
<script src="~/assets/plugins/datatables/buttons.html5.min.js"></script>
<script src="~/assets/plugins/datatables/buttons.print.min.js"></script>
<script src="~/assets/plugins/datatables/dataTables.fixedHeader.min.js"></script>
<script src="~/assets/plugins/datatables/dataTables.keyTable.min.js"></script>
<script src="~/assets/plugins/datatables/dataTables.responsive.min.js"></script>
<script src="~/assets/plugins/datatables/responsive.bootstrap.min.js"></script>
<script src="~/assets/plugins/datatables/dataTables.scroller.min.js"></script>


<script>

    function urlto(url) {
        window.location.href = url;
    }
    function eddata(url) {
        swal({
            title: "操作确认",
            text: "删除后，您将无法恢复此题目！",
            icon: "warning",
            buttons: true,
            dangerMode: true,
        })
            .then((willDelete) => {
                if (willDelete) {
                    $.ajax({
                        url: url,
                        type: "post",
                        success: function (response) {
                            var rs = JSON.stringify(response);
                            if (response == null)
                                swal("操作成功！", {
                                    icon: "success",
                                });
                            else
                                swal(rs, {
                                    icon: "error",
                                });
                        }
                    });

                }
            });
    }
    function deletes(id, obj) {
        swal({
            title: "操作确认",
            text: "删除后，您将无法恢复此题目！",
            icon: "warning",
            buttons: true,
            dangerMode: true,
        })
            .then((willDelete) => {
                if (willDelete) {
                    $.ajax({
                        url: "Delete/" + id,
                        type: "post",
                        success: function (response) {
                            if (response == "1") {
                                $(obj).parent().parent().remove();
                                swal("删除成功！", {
                                    icon: "success",
                                });
                            } else
                                swal("删除失败！", {
                                    icon: "error",
                                });
                        }
                    });

                }
            });
    }
</script>


<script>

    !function ($) {
        var DataTable = function () {
            this.$dataTableButtons = $("#datatable-buttons")
        };
        DataTable.prototype.createDataTableButtons = function () {
            0 !== this.$dataTableButtons.length && this.$dataTableButtons.DataTable({
                dom: "Bfrtip",
                buttons: [{
                    extend: "copy",
                    className: "btn-success"
                }, {
                    extend: "csv"
                }, {
                    extend: "excel"
                }, {
                    extend: "pdf"
                }, {
                    extend: "print"
                }],
                responsive: !0
            });
        },
            DataTable.prototype.init = function () {
                //creating demo tabels
                $('#datatable').dataTable();
                $('#datatable-keytable').DataTable({ keys: true });
                $('#datatable-responsive').DataTable();
                $('#datatable-scroller').DataTable({
                    ajax: "assets/plugins/datatables/json/scroller-demo.json",
                    deferRender: true,
                    scrollY: 380,
                    scrollCollapse: true,
                    scroller: true
                });
                var table = $('#datatable-fixed-header').DataTable({ fixedHeader: true });

                //creating table with button
                this.createDataTableButtons();
            },
            //init
            $.DataTable = new DataTable, $.DataTable.Constructor = DataTable
    }(window.jQuery),

        //initializing
        function ($) {
            $.DataTable.init();
        }(window.jQuery);

</script>